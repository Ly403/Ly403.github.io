<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> è¿ç»­æ—¶é—´çš„é©¬å¯å¤«é“¾ | Yi Liu's Homepage. ğŸ˜€ </title> <meta name="author" content="Yi LIU"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?b05f9a0b7405d7c8c89c7465593dea81"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?dadeb9c5d1fd12bc8d37475657446863"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?1fefb6021bf36010f25ea1cef24af84e"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?53a094b51ed1d1e025731eb00d240058" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%91%8B&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://ly403.github.io/blog/2025/%E8%BF%9E%E7%BB%AD%E6%97%B6%E9%97%B4%E7%9A%84%E9%A9%AC%E5%8F%AF%E5%A4%AB%E9%93%BE/"> <script src="/assets/js/theme.js?f2531f05c6f8e1622518f4f5a1e385b1"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?46af317e693b09921dcb92261d123fbc" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Yi Liu's Homepage. ğŸ˜€ </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/teaching/">teaching</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">è¿ç»­æ—¶é—´çš„é©¬å¯å¤«é“¾</h1> <p class="post-meta"> Created on January 02, 2025 </p> <p class="post-tags"> <a href="/blog/2025"> <i class="fa-solid fa-calendar fa-sm"></i> 2025 </a> Â  Â· Â  <a href="/blog/tag/formatting"> <i class="fa-solid fa-hashtag fa-sm"></i> formatting</a> Â  <a href="/blog/tag/math"> <i class="fa-solid fa-hashtag fa-sm"></i> math</a> Â  Â· Â  <a href="/blog/category/flow-matching"> <i class="fa-solid fa-tag fa-sm"></i> Flow_Matching</a> Â  <a href="/blog/category/discrete-flow-matching"> <i class="fa-solid fa-tag fa-sm"></i> Discrete_Flow_Matching</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>æœ¬æ–‡åŸºäºFlow Matching Guide and Code<sup id="fnref:1"><a href="#fn:1" class="footnote" rel="footnote" role="doc-noteref">1</a></sup> ï¼Œä¸»è¦æ˜¯è¯»è¿™ç¯‡æ–‡ç« æ—¶å€™çš„ç¬”è®°ã€‚</p> <p>è¿ç»­æ—¶é—´çš„é©¬å¯å¤«é“¾ï¼ˆContinuous Time Markov Chainsï¼ŒCTMCï¼‰æ˜¯Flowçš„æ›¿ä»£ï¼Œä¹Ÿæ˜¯ä¸€ç§ç”Ÿæˆå¼æ¨¡å‹ï¼Œç”¨æ¥ç”Ÿæˆç¦»æ•£çš„æ•°æ®ã€‚å®ƒæ˜¯ç¦»æ•£å‹Flow Matchingï¼ˆDiscrete Flow Matchingï¼Œ DFMï¼‰<sup id="fnref:2"><a href="#fn:2" class="footnote" rel="footnote" role="doc-noteref">2</a></sup>çš„åŸºç¡€ã€‚</p> <h2 id="ç¦»æ•£çŠ¶æ€ç©ºé—´å’Œéšæœºå˜é‡">ç¦»æ•£çŠ¶æ€ç©ºé—´å’Œéšæœºå˜é‡</h2> <p>è¿™ä¸€èŠ‚å°±æ˜¯è®²ä¸€äº›notationsã€‚</p> <p>ä»¥ç±»æ¯”çš„æ–¹æ³•å¯ä»¥è¡¨ç¤ºç¦»æ•£çŠ¶æ€ç©ºé—´ï¼š</p> <ul> <li> <p>è¿ç»­çŠ¶æ€ç©ºé—´ï¼š $\mathbb{R}^{d}$ï¼Œ$d$æ˜¯ç©ºé—´ç»´åº¦</p> </li> <li> <p>ç¦»æ•£çŠ¶æ€ç©ºé—´ï¼š$\mathcal{S} = \mathcal{T}^d$ï¼Œ$d$æ˜¯ç©ºé—´ç»´åº¦ï¼Œå…¶ä¸­$\mathcal{T}=[K]={1,2,\cdots, K}$ï¼Œ$\mathcal{T}$ä¹Ÿå°±æ˜¯vocabularyã€‚</p> </li> </ul> <p>ä»$\mathcal{S}$ä¸­é‡‡æ ·çš„æ ·æœ¬è®°ä¸º$x = (x^1,x^2,\cdots,x^d)\in\mathcal{S}$ï¼Œå…¶ä¸­$x^i$å°±æ˜¯ä¸€ä¸ªtokenã€‚</p> <p>ç”¨$X$è¡¨ç¤ºçŠ¶æ€ç©ºé—´$\mathcal{S}$ä¸­çš„éšæœºå˜é‡ï¼Œå…¶pmfï¼ˆprobability mass functionï¼Œæ¦‚ç‡è´¨é‡å‡½æ•°ï¼Œç¦»æ•£åˆ†å¸ƒå«æ¦‚ç‡è´¨é‡å‡½æ•°ï¼Œè¿ç»­åˆ†å¸ƒå«æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼‰ä¸º\(p_X : \mathcal{S} \to \mathbb{R}_{\ge 0}\)ï¼Œå®é™…ä¸Špmfæ˜¯ä¸€ä¸ªä»çŠ¶æ€ç©ºé—´\(\mathcal{S}\)åˆ°æ­£å®æ•°é›†çš„æ˜ å°„ã€‚pmfæ»¡è¶³æ±‚å’Œä¸º1çš„çº¦æŸæ¡ä»¶ï¼š\(\sum_{x\in\mathcal{S}}p_X(x)=1\)ã€‚</p> <p>å¯¹äºäº‹ä»¶$A\in\mathcal{S}$ï¼Œå…¶å‘ç”Ÿæ¦‚ç‡å¯ä»¥å¦‚ä¸‹è®¡ç®—ï¼š</p> \[\mathbb{P}(X\in A)=\sum_{x\in A}p_X(x)\] <p>è¿˜éœ€è¦ä¸€ä¸ªdeltaåˆ†å¸ƒï¼ˆå¥½åƒä¹Ÿå«Diracåˆ†å¸ƒï¼‰çš„pmfè¡¨ç¤ºï¼Œå¦‚ä¸‹ï¼š</p> \[\delta(x,z)=\begin{cases} +\infty \quad x=z\\ 0\quad \text{else}. \end{cases}\] <p>è¿™ä¸ªåˆ†å¸ƒè¡¨ç¤ºåªæœ‰$x$å–ç‰¹å®šå€¼$z$çš„æ—¶å€™æ‰æœ‰æ¦‚ç‡ï¼Œæ²¡æœ‰æ¦‚ç‡å–å…¶ä»–å€¼ã€‚ä½†æ˜¯è¯¥åˆ†å¸ƒçš„pmfåœ¨xçš„å®šä¹‰åŸŸç§¯åˆ†ä¹Ÿæ˜¯1ã€‚</p> <p>æœ‰æ—¶å€™ä¹Ÿä¼šåœ¨tokenå±‚çº§ä¸Šå®šä¹‰deltaåˆ†å¸ƒï¼Œä¾‹å¦‚$\delta(x^i,y^i)\quad x^i,y^i \in \mathcal{T}$ã€‚</p> <p>å…³äºDiracåˆ†å¸ƒçš„æ›´å¤šä¿¡æ¯å¯ä»¥å‚è€ƒï¼š<a href="https://spaces.ac.cn/archives/1870" rel="external nofollow noopener" target="_blank">https://spaces.ac.cn/archives/1870</a></p> <h2 id="ctmcç”Ÿæˆå¼æ¨¡å‹">CTMCç”Ÿæˆå¼æ¨¡å‹</h2> <p>CTMCæ˜¯è¿ç»­æ—¶é—´çš„é©¬å¯å¤«é“¾ï¼Œé©¬å¯å¤«é“¾æ˜¯ç¦»æ•£çŠ¶æ€çš„é©¬å¯å¤«è¿‡ç¨‹ã€‚æ‰€ä»¥CTMCæ˜¯è¿ç»­æ—¶é—´ç¦»æ•£çŠ¶æ€çš„é©¬å¯å¤«è¿‡ç¨‹ï¼Œå¯ä»¥è¡¨ç¤ºä¸º$(X_t)_{0\le t\le 1}$ã€‚å› ä¸ºCTMCæ˜¯éšæœºè¿‡ç¨‹å˜›ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸€æ—éšæœºå˜é‡ã€‚å®ƒçš„é©¬å¯å¤«å‡è®¾å¯ä»¥è¡¨ç¤ºä¸ºå¦‚ä¸‹çš„å½¢å¼ï¼š</p> \[\mathbb{P}(X_{t+s}=z\mid X_s =x,X_u=y,0\le u\le s)=\mathbb{P}(X_{t+s}=z\mid X_s = x)\] <p>ç±»æ¯”ç¦»æ•£æ—¶é—´çš„é©¬å¯å¤«é“¾ï¼Œè¿™ä¸ªå…¬å¼è¯´çš„å°±æ˜¯åªè¦çŸ¥é“$X_s$çš„å€¼åï¼Œåœ¨$s$æ—¶åˆ»ä¹‹å‰çš„å€¼ï¼ˆä¾‹å¦‚å¼å­ä¸­çš„$X_u$ï¼‰ï¼Œå¯¹$s$æ—¶å€™ä¹‹åçš„å€¼æ²¡æœ‰å½±å“ï¼ˆå¼ä¸­$X_{t+s}$ï¼‰ã€‚å³â€œé—å¿˜è¿‡å»â€ã€‚å…³äºCTMCæ›´å¤šçš„ä»‹ç»å¯ä»¥å‚è€ƒï¼š<a href="https://www.math.pku.edu.cn/teachers/lidf/course/stochproc/stochprocnotes/html/_book/markovc.html#markovc-ctime" rel="external nofollow noopener" target="_blank">https://www.math.pku.edu.cn/teachers/lidf/course/stochproc/stochprocnotes/html/_book/markovc.html#markovc-ctime</a>ã€‚</p> <p>ç±»æ¯”æ‰©æ•£æ¨¡å‹å’ŒFlow Matchingï¼Œä¹Ÿå¯ä»¥å®šä¹‰CTMCçš„è½¬ç§»æ ¸ï¼ˆprobability transition kernelï¼‰ä¸º$p_{t+h\mid t}$ï¼Œå…¶å½¢å¼å¦‚ä¸‹ï¼š</p> <p>\begin{equation} p_{t+h\mid t}:= \mathbb{P}(X_{t+h}=y\mid X_t = x)=\delta(y,x)+hu_t(y,x)+o(h), \quad \mathbb{P}(X_0=x)=p(x)\label{eq:transition_kernel} \end{equation}</p> <p>$p_{t+h\mid t}$çš„å›¾ç¤ºå¦‚ä¸‹ï¼š</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/post/CTMC-480.webp 480w,/assets/img/post/CTMC-800.webp 800w,/assets/img/post/CTMC-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/post/CTMC.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> CTMCæ¨¡å‹çš„çŠ¶æ€è½¬ç§»è¿‡ç¨‹å›¾ç¤º </div> <p>å…¬å¼$\eqref{eq:transition_kernel}$ä¸­ï¼Œ$p$è¡¨ç¤ºéšæœºè¿‡ç¨‹$(X_t)_{0\le t\le 1}$åœ¨$t=0$æ—¶å€™çš„åˆ†å¸ƒï¼ˆå–$t=0$éšæœºè¿‡ç¨‹é€€åŒ–æˆéšæœºå˜é‡ï¼‰ã€‚$o(h)$æ˜¯é«˜é˜¶æ— ç©·å°é‡</p> \[\lim_{h\to0} \cfrac{o(h)}{h} = 0\] <p>å…¶ä¸­ï¼Œ$u_t(y,x)$å«åšé€Ÿç‡ï¼ˆratesæˆ–è€…velocitiesï¼‰ï¼Œå®ƒå¯ä»¥ç±»æ¯”Flow Matchingé‡Œé¢è®²çš„å‘é‡åœºï¼Œåœ¨CTMCé‡Œé¢è¡¨ç¤ºçš„æ˜¯è¡¨ç¤ºçŠ¶æ€ä¹‹é—´æ¦‚ç‡è½¬æ¢çš„é€Ÿç‡ï¼ŒæŒ‰æˆ‘çš„ç†è§£ï¼Œå°±æ˜¯ä¸‹é¢çš„è¿™ä¸ªå½¢å¼ï¼š</p> <p>\begin{equation} u_t(y,x) =\lim_{h\to 0}\cfrac{\mathbb{P}(X_{t+h}=y\mid X_t = x)}{h} \label{eq:rate} \end{equation}</p> <p>å®ƒæ˜¯æ—¶é—´$t$çš„å‡½æ•°ã€‚ä»å…¬å¼$\eqref{eq:rate}$å’Œå…¬å¼$\eqref{eq:transition_kernel}$çš„è§’åº¦ç†è§£ï¼Œ$\delta(y,x)$å°±æ˜¯å‘ç”ŸçŠ¶æ€è½¬ç§»å‰ï¼ˆå³$t$æ—¶åˆ»ï¼‰çš„åˆå§‹çŠ¶æ€ã€‚å…·ä½“è®²ï¼Œç”±äºæˆ‘ä»¬ä»¥$X_t=x$ä¸ºæ¡ä»¶ï¼Œæ‰€ä»¥åˆå§‹çŠ¶æ€å°±æ˜¯ç¡®å®šçš„ï¼Œç”¨æ¦‚ç‡å½¢å¼è¡¨ç¤ºå°±æ˜¯$\delta(\cdot,x)$ï¼Œä¹Ÿå°±æ˜¯è¯´åˆå§‹çŠ¶æ€æ—¶ï¼ˆå³$t$æ—¶åˆ»ï¼‰ï¼Œåœ¨$x$å¤„æœ‰æ¦‚ç‡ï¼Œè€Œå…¶ä»–çŠ¶æ€ç©ºé—´ä¸­çš„ç‚¹æ¦‚ç‡éƒ½æ˜¯0ã€‚</p> <p>å…¬å¼$\eqref{eq:transition_kernel}$ä¸­ï¼Œ$u_t(y,x)$éœ€è¦æ»¡è¶³ä¸€å®šçš„æ¡ä»¶ï¼Œç§°ä¸ºé€Ÿç‡æ¡ä»¶ï¼ˆrate conditionsï¼‰ï¼š</p> <p>\begin{equation} u_t(y,x)\ge 0 \text{ for all } y\neq x \text{, and }\sum_{y}u_t(y,x) =0 \label{eq:rate_cond} \end{equation}</p> <p>è¿™æ ·å°±æ˜¯è¯´ï¼Œ$u_t(x,x)&lt; 0$ï¼Œä¸”$u_t(x,x)=-\sum_{y\neq x}u_t(y,x)$ã€‚é€Ÿåº¦æ¡ä»¶çš„å­˜åœ¨æ˜¯ä¸ºäº†ä¿è¯å…¬å¼$\eqref{eq:transition_kernel}$ç®—å‡ºçš„è½¬ç§»æ ¸$p_{t+h\mid t}(\cdot\mid x)\ge0$ä¸”$\sum p_{t+h\mid t}(\cdot\mid x)=1$ã€‚</p> <p>ç±»æ¯”Flow Matchingï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¯´ï¼š<strong>å¦‚æœå­˜åœ¨$p_{t+h\mid t}$æ»¡è¶³å…¬å¼$\eqref{eq:transition_kernel}$ï¼Œ$p_{t+h\mid t}$çš„è¾¹ç¼˜åˆ†å¸ƒä¸º$p_t$ï¼Œåˆ™ç§°$u_t$ç”Ÿæˆäº†$p_t$</strong>ã€‚</p> <p>ç”¨å…¬å¼$\eqref{eq:transition_kernel}$ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨Euleræ³•ï¼ˆç±»æ¯”æ‰©æ•£æ¨¡å‹å’ŒFlow Matchingé‡Œé¢ODEçš„è§£æ³•ï¼‰æ¥é‡‡æ ·ï¼Œå¦‚ä¸‹ï¼š</p> \[\mathbb{P}(X_{t+h}=y\mid X_t)=\delta(y,X_t)+hu_t(y,X_t)\] <p>ä½†æ˜¯è¯¥å¼å¼•å…¥äº†ä¸€ä¸ªåå·®ï¼Œå°±æ˜¯$o(h)$ã€‚å› ä¸ºè¿™æ˜¯ä¸€ä¸ªé«˜é˜¶å°é‡ï¼Œæ‰€ä»¥åªè¦$h$è¶³å¤Ÿå°ï¼Œé‚£ä¹ˆ$o(h)$å°±ä¼šè¶‹äº0ï¼Œè¿™å°±æ˜¯å¸Œæœ›Euleræ³•é‡‡æ ·å‡†ç¡®çš„æ¡ä»¶ï¼Œä½†æ˜¯è¿™æ ·é‡‡æ ·æ­¥éª¤å°±ä¼šå¾ˆå¤šã€‚ä¸€ç§ç¼“è§£è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•æ˜¯ç”¨å¦‚ä¸‹çš„Euleræ³•ï¼š</p> \[\mathbb{P}(X_{t+h}=y\mid X_t) =\begin{cases} \exp \left[hu_t(X_t,X_t)\right] \qquad \qquad\qquad\qquad\qquad y=X_t \\ \cfrac{u_t(y,X_t)}{\left|u_t(X_t,X_t) \right|}\left( 1 - \exp\left[hu_t(X_t,X_t)\right] \right) \qquad y\neq X_t \end{cases}\] <h2 id="æ¦‚ç‡è·¯å¾„å’Œkolmogorovæ–¹ç¨‹">æ¦‚ç‡è·¯å¾„å’ŒKolmogorovæ–¹ç¨‹</h2> <p>ç±»æ¯”è¿ç»­æƒ…å†µä¸‹çš„ä¸€è‡´æ€§æ–¹ç¨‹ï¼ˆContinuity Equationï¼‰ï¼ŒCTMCæ¨¡å‹çš„è¾¹ç¼˜æ¦‚ç‡$p_t$æ»¡è¶³Kolmogorovæ–¹ç¨‹ï¼š</p> <p>\begin{equation} \cfrac{\mathrm{d}}{\mathrm{d}t}p_t(y)=\sum_x u_t(y,x)p_t(x) \label{eq:Kolmogorov} \end{equation}</p> <p>ä¸‹é¢è¿™ä¸ªå®šç†æè¿°äº†ä¸Šå¼è¿™ç§çº¿æ€§ODEç³»ç»Ÿå”¯ä¸€è§£çš„å­˜åœ¨æ€§ï¼š</p> <p><strong>å®šç†</strong>ï¼ˆçº¿æ€§ODEçš„è§£çš„å­˜åœ¨æ€§å’Œå”¯ä¸€æ€§ï¼‰ï¼šå¦‚æœ$u_t(y,x)$åœ¨$C([0,1))$ä¸­ï¼ˆå³åœ¨æ—¶é—´$t$ä¸Šè¿ç»­ï¼‰ï¼Œé‚£ä¹ˆå­˜åœ¨å”¯ä¸€çš„è§£$p_t(x)$æ»¡è¶³Kolmogorovæ–¹ç¨‹$\eqref{eq:Kolmogorov}$ï¼Œå…¶ä¸­ï¼Œ$t\in[0,1)$ï¼Œåˆå§‹çŠ¶æ€$p_0(x) = p(x)$ã€‚</p> <p>å¯¹CTMCè€Œè¨€ï¼Œåœ¨$t\in[0,1)$åŒºé—´ï¼Œä¸éœ€è¦é¢å¤–çš„æ¡ä»¶ï¼Œå°±èƒ½å¤Ÿç¡®å®šè§£ä¸€å®šå­˜åœ¨ã€‚å…³äºè¯¥å®šç†çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯å¯ä»¥å‚è€ƒCoddington et al. (1956)<sup id="fnref:3"><a href="#fn:3" class="footnote" rel="footnote" role="doc-noteref">3</a></sup>ä¸­çš„å®šç†5.1å’Œ5.2ã€‚</p> <p>æ–¹ç¨‹$\eqref{eq:Kolmogorov}$å¯ä»¥åŒ–ä¸ºï¼š</p> \[\begin{equation} \begin{aligned} \sum_x u_t(y,x)p_t(x) &amp;=\underbrace{\sum_{x\neq y} u_t(y,x)p_t(x)}_{è¾“å…¥é€šé‡}-\underbrace{\sum_{x\neq y}u_t(x,y)p_t(y)}_{è¾“å‡ºé€šé‡} \\ &amp;=-\sum_{x\neq y}\left[j_t(x,y)-j_t(y,x)\right] \\ \end{aligned} \end{equation}\] <p>å…¶ä¸­ï¼Œ$j_t(y,x):=u_t(y,x)p_t(x)$ï¼Œç§°ä¸ºæ¦‚ç‡é€šé‡ï¼ˆprobability fluxï¼‰ã€‚ä¸Šå¼å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯æŠŠä»$x$è¾“å…¥åˆ°$y$çš„é€šé‡åˆ†æˆäº†ä»$x$è¾“å…¥åˆ°$y$çš„éƒ¨åˆ†å’Œä»$y$è¾“å‡ºåˆ°$x$çš„éƒ¨åˆ†ã€‚</p> <p>å°†è¾“å‡ºé€šé‡è¶…å‡ºæ¥çš„éƒ¨åˆ†å®šä¹‰ä¸ºæ•£åº¦ï¼Œå³</p> \[\text{div}(u_t p_t)(y) =\sum_{x\neq y}\left[j_t(x,y)-j_t(y,x)\right]\] <p>é‚£ä¹ˆKolmogorovæ–¹ç¨‹å°±å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p> \[\dot p_t(y)+\text{div}(u_t p_t)(y)=0\] <p>è¿™å’Œè¿ç»­å‹Flow Matchingçš„ä¸€è‡´æ€§æ–¹ç¨‹ç»Ÿä¸€èµ·æ¥äº†ã€‚</p> <p>ä»¥ä¸‹è¿˜æœ‰ä¸€ä¸ªç»“æœï¼Œæ˜¯åœ¨CTMC æ¡†æ¶ä¸­æ„å»ºæ¦‚ç‡è·¯å¾„å’Œé€Ÿåº¦çš„ä¸»è¦å·¥å…·ï¼š</p> <p><strong>å®šç†</strong> ï¼ˆç¦»æ•£è´¨é‡å®ˆæ’ï¼ŒDiscrete Mass Conservationï¼‰ï¼š$u_t(y,x)$åœ¨$C([0,1))$ä¸­ï¼Œ$p_t(x)$åœ¨$C^1([0,1))$ä¸­ï¼ˆæˆ‘çš„ç†è§£æ˜¯ä¸€é˜¶å¯¼æ•°åœ¨æ—¶é—´$t$ä¸Šè¿ç»­ï¼‰ï¼Œåˆ™å¦‚ä¸‹ä¸¤ä¸ªç»“è®ºæ˜¯ç­‰ä»·çš„ï¼š</p> <ul> <li>åœ¨$t\in[0,1)$æ—¶ï¼Œ $p_t,u_t$æ»¡è¶³Kolmogorovæ–¹ç¨‹$\eqref{eq:Kolmogorov}$ï¼Œ$u_t$æ»¡è¶³é€Ÿç‡æ¡ä»¶$\eqref{eq:rate_cond}$ã€‚</li> <li>åœ¨$t\in[0,1)$æ—¶ï¼Œ$u_t$ç”Ÿæˆï¼ˆç”¨å‰æ–‡çš„æœ¯è¯­ï¼‰äº†$p_t$ã€‚</li> </ul> <p>è¯¥å®šç†çš„è¯æ˜åœ¨<sup id="fnref:1:1"><a href="#fn:1" class="footnote" rel="footnote" role="doc-noteref">1</a></sup>çš„appendix A.1.ã€‚</p> <h3 id="ä¿æ¦‚ç‡é€Ÿç‡probability-preserving-velocities">ä¿æ¦‚ç‡é€Ÿç‡ï¼ˆProbability preserving velocitiesï¼‰</h3> <p>å¦‚æœ$u_t(y,x)$ç”Ÿæˆäº†æ¦‚ç‡è·¯å¾„$p_t(x)$ï¼Œæˆ‘ä»¬æ„é€ ä¸€ä¸ªæ–°çš„é€Ÿç‡ï¼š</p> \[\tilde u_t(y,x) = u_t(y,x) + v_t(y,x)\] <p>åªè¦$v_t(y,x)$æ»¡è¶³é€Ÿç‡æ¡ä»¶ä¸”</p> \[\sum_x v_t(y,x)p_t(x) = 0\] <p>é‚£ä¹ˆ$\tilde u_t(y,x)$è¿˜èƒ½Kolmogorovæ–¹ç¨‹ï¼š</p> \[\sum_x \tilde u_t(y,x)p_t(x) = \sum_x u_t(y,x)p_t(x) = \dot p_t(y)\] <p>é‚£ä¹ˆ$\tilde u_t(y,x)$è¿˜èƒ½ç”Ÿæˆ$p_t(x)$ã€‚è¿™ä¸ªç»“è®ºåœ¨ç¦»æ•£å‹Flow Matchingé‡Œé¢éå¸¸é‡è¦ã€‚</p> <hr> <div class="footnotes" role="doc-endnotes"> <ol> <li id="fn:1"> <p>Lipman Y, Havasi M, Holderrieth P, et al. Flow Matching Guide and Code[J]. arXiv preprint arXiv:2412.06264, 2024.Â <a href="#fnref:1" class="reversefootnote" role="doc-backlink">â†©</a>Â <a href="#fnref:1:1" class="reversefootnote" role="doc-backlink">â†©<sup>2</sup></a></p> </li> <li id="fn:2"> <p>Gat I, Remez T, Shaul N, et al. Discrete flow matching[J]. arXiv preprint arXiv:2407.15595, 2024.Â <a href="#fnref:2" class="reversefootnote" role="doc-backlink">â†©</a></p> </li> <li id="fn:3"> <p>Coddington E A, Levinson N, Teichmann T. Theory of ordinary differential equations[J]. 1956.Â <a href="#fnref:3" class="reversefootnote" role="doc-backlink">â†©</a></p> </li> </ol> </div> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/%E7%A6%BB%E6%95%A3%E6%B5%81%E5%8C%B9%E9%85%8D%E6%A8%A1%E5%9E%8B-3/">ç¦»æ•£å‹æµåŒ¹é…æ¨¡å‹ï¼ˆ3ï¼‰</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/%E7%A6%BB%E6%95%A3%E6%B5%81%E5%8C%B9%E9%85%8D%E6%A8%A1%E5%9E%8B-2/">ç¦»æ•£å‹æµåŒ¹é…æ¨¡å‹ï¼ˆ2ï¼‰</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/%E7%A6%BB%E6%95%A3%E6%B5%81%E5%8C%B9%E9%85%8D%E6%A8%A1%E5%9E%8B-1/">ç¦»æ•£å‹æµåŒ¹é…æ¨¡å‹ï¼ˆ1ï¼‰</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> Â© Copyright 2025 Yi LIU. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?c999e8c5281874b7534e3352f835d4c3" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?b977fe0c21b2118ed853308b1b923969"></script> <script src="/assets/js/no_defer.js?699fa7cbe3b29f831db7d5250ba3203a"></script> <script defer src="/assets/js/common.js?d3a25b46bbd2e0a751a27b173abc6e5f"></script> <script defer src="/assets/js/copy_code.js?fff63901a03063094790ffbfd4bc0cb4" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?25eff8ff4144a010e4ad7b31403102cf"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?04761245f225e3ad9e5e3f875d4e1074"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?b78cb42895d74e4fd6de6f633edcf181" type="text/javascript"></script> <script src="/assets/js/tabs.min.js?b3298908ffcca362ac4f3e3a7a7ebe94"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?230637657ac0b42e92d76e2b4c1b4764"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?ade73d6d60912d119f9c9347bc176630"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?f74bfa9a88ab862fb9df1c46146b7b7d"></script> </body> </html>